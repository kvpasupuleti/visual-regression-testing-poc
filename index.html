<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visual Regression Testing POC</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Visual Regression Testing POC</h1>

      <div class="editor-container">
        <div class="section-header">
          <h2>User Code</h2>
          <button class="toggle-btn" data-target="user-code-section">
            Toggle
          </button>
        </div>
        <div id="user-code-section" class="collapsible-section">
          <div class="code-editors">
            <div class="editor">
              <h3>HTML</h3>
              <textarea
                id="html-editor"
                placeholder="Enter HTML code here..."
              ></textarea>
            </div>
            <div class="editor">
              <h3>CSS</h3>
              <textarea
                id="css-editor"
                placeholder="Enter CSS code here..."
              ></textarea>
            </div>
            <div class="editor">
              <h3>JavaScript</h3>
              <textarea
                id="js-editor"
                placeholder="Enter JavaScript code here..."
              ></textarea>
            </div>
          </div>

          <div class="buttons">
            <button id="run-btn">Run Code</button>
            <button id="test-btn" class="btn-with-loader">
              <span class="loader"></span>
              Run Visual Test
            </button>
          </div>
        </div>
      </div>

      <div class="editor-container solution-editor-container">
        <div class="section-header">
          <h2>Expected Solution Code</h2>
          <button class="toggle-btn" data-target="solution-code-section">
            Toggle
          </button>
        </div>
        <div id="solution-code-section" class="collapsible-section">
          <div class="code-editors">
            <div class="editor">
              <h3>HTML</h3>
              <textarea
                id="solution-html-editor"
                placeholder="Enter expected HTML code here..."
              ></textarea>
            </div>
            <div class="editor">
              <h3>CSS</h3>
              <textarea
                id="solution-css-editor"
                placeholder="Enter expected CSS code here..."
              ></textarea>
            </div>
            <div class="editor">
              <h3>JavaScript</h3>
              <textarea
                id="solution-js-editor"
                placeholder="Enter expected JavaScript code here..."
              ></textarea>
            </div>
          </div>

          <div class="buttons">
            <button id="update-solution-btn">Update Solution</button>
          </div>
        </div>
      </div>

      <div class="output-container">
        <div class="preview-section">
          <h3>User Output</h3>
          <div class="iframe-container">
            <iframe
              id="user-output"
              sandbox="allow-scripts allow-same-origin"
            ></iframe>
          </div>
        </div>

        <div class="preview-section">
          <h3>Expected Output</h3>
          <div class="iframe-container">
            <iframe
              id="expected-output"
              sandbox="allow-scripts allow-same-origin"
            ></iframe>
          </div>
        </div>
      </div>

      <div id="results" class="results-container">
        <h2>Test Results</h2>
        <div class="score-display">
          <div class="score-box visual-score">
            <h3 class="score-box-title">
              Visual Similarity
              <div class="tooltip-wrapper">
                <span class="info-icon">ⓘ</span>
                <span class="custom-tooltip"
                  >Measures how visually similar your solution is to the
                  expected output. Higher scores mean your layout, styling, and
                  visual elements closely match the expected design.</span
                >
              </div>
            </h3>
            <div id="visual-score" class="score">-</div>
          </div>
          <div class="score-box func-score">
            <h3 class="score-box-title">
              Functional Flow
              <div class="tooltip-wrapper">
                <span class="info-icon">ⓘ</span>
                <span class="custom-tooltip"
                  >Evaluates how well your application's functionality works.
                  Tests for proper event handling, data management, and user
                  interaction patterns.</span
                >
              </div>
            </h3>
            <div id="functional-score" class="score">-</div>
          </div>
          <div class="score-box total-score">
            <h3 class="score-box-title">
              Total Score
              <div class="tooltip-wrapper">
                <span class="info-icon">ⓘ</span>
                <span class="custom-tooltip"
                  >Combined score weighted as 40% visual similarity and 60%
                  functional correctness. Represents overall solution
                  quality.</span
                >
              </div>
            </h3>
            <div id="total-score" class="score">-</div>
          </div>
        </div>

        <div class="diff-container">
          <h3>Visual Difference</h3>
          <canvas id="diff-canvas"></canvas>
        </div>
      </div>
    </div>

    <script src="./index.js" type="module"></script>
  </body>
</html>
